{{ define "main" }}
<div id="profile">
  <div id="profile-header">
    <h2 id="profile-name">{{.Params.Name}}</h2>
    {{ if .Params.Keynote }}
      <p class="profile-keynote">Flagship Session Speaker</span>
    {{ end }}
    {{ $image := index (.Resources.ByType "image") 0 }}
    <div id="profile-picture"> 
      <img src="{{$image.RelPermalink}}" /> 
    </div>
    <h3>{{ .Params.Role }}</h3>
  </div>
  <div id="profile-bio">
    <p>{{ .Content }}</p>
  </div>
</div>

<h2>Speaker Schedule</h2>
{{ $pan := .Params.Panel }}
{{ $panTwo := .Params.Panel_two }}
{{ $keynote := .Params.Keynote }}
{{ $workshop := .Params.Workshop }}
{{ $fileName := .File.ContentBaseName }}

{{ range $.Site.Params.Schedule }}
  {{ $showThing := false }}
  {{ range .slots }}
    {{ range .events }}
      {{ if or (and .code (eq .code $panTwo)) (and .keynote (eq .keynote $keynote)) (and .workshop (eq .workshop $workshop)) }}
        {{ $showThing = true }}
      {{end}}
    {{end}}
  {{end}}
  {{ if $showThing }}
    {{ partial "schedule_day" (dict "root" $ "day" . "pan" $panTwo "keynote" $keynote "workshop" $workshop "fileName" $fileName) }}
  {{end}}
{{end}}

{{ with .Params.Panel }}
  {{ range $.Site.Params.Schedule }}
    {{ $showDay := false }}
    {{ range .slots }}
      {{ range .events }}
        {{ if eq .code $pan }}
          {{ $showDay = true }}
        {{end}}
      {{end}}
    {{end}}
    {{ if $showDay }}
      {{ partial "schedule_day" (dict "root" $ "day" . "pan" $pan "fileName" $fileName) }}
    {{end}}
  {{end}}
{{end}}

{{end}}
