<div class="schedule-event {{ .type }}">
  <div class="event-info">
    {{ if eq .type "keynote"}}
      <span class="event-type-tag">Keynote Address</span><br />
    {{end}}
    {{ if eq .type "panel"}}
      <span class="event-type-tag">Panel</span><br />
    {{end}}
    {{ if eq .type "workshop"}}
      <span class="event-type-tag">Workshop</span><br />
    {{end}}
    <span class="event-title"> 
      {{.content | safeHTML}} 
    </span>
    <span class="event-speakers">
      {{ range $key, $value := sort $speakerLinks }}
        {{if $key}}
          |
        {{end}}
        {{safeHTML $value}}
      {{end}}
    </span>
    
    <span class="event-moderators">
      {{ if in .event.moderator " " }}
        Moderated by {{.moderator | safeHTML}}
      {{ else }}
        {{ $pages := (where $.root.Site.RegularPages "Section" "speakers") }}
        {{ $moderators := (where $pages "File.ContentBaseName" .moderator) }}
        {{ $moderator := index $moderators 0}}
        {{ if $moderator }}
          {{ $moderatorLink := printf "<a href='%s'>%s</a>" $moderator.RelPermalink $moderator.Params.name}}
          {{ $moderatorText := "Moderated by "}}
          {{ if .moderatorText }}
            {{ $moderatorText = .moderatorText }}
          {{ end }}
          {{$moderatorText}}
          {{ safeHTML $moderatorLink }}
        {{ end }}
      {{ end }}
    </span>
  </div>
  
  <div class="event-location"> 
    {{ .location }} 
  </div>
</div>


